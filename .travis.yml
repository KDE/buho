sudo: required
services:
- docker
addons:
  apt:
    packages:
    - realpath
install:
- docker pull ubuntu:bionic
- wget https://raw.githubusercontent.com/nomad-desktop/nxos-repository-util/master/nxos-repository-util.sh
  -O nxos-repository-util.sh
- chmod +x nxos-repository-util.sh
script:
- docker run --rm -v $(pwd)/:/build/ -w /build/ ubuntu:bionic /bin/bash travis-build.sh
branches:
  only:
  - master
  - development
deploy:
- provider: script
  script: "./source/nxos-repository-util.sh upload testing *.deb"
  skip_cleanup: true
  on:
    branch: master
- provider: script
  script: "./source/nxos-repository-util.sh upload development *.deb"
  skip_cleanup: true
  on:
    branch: development
notifications:
  email: false
  slack: nitrux:LgpKKPnWky7IWShmzXsyVDWu
env:
  matrix:
  - secure: qWytgwwvX7GuF3EGceia/3ZmGnvFSG+ESHVBfGLJTSFv3jW4bG3BXbpgBF4wQQQ3svHnk+J/0wl7yP6jq58+/r0K1q61iugNUTRftmHKipg6/E5gpw6GWBDDhzkbykX3GpSaY16gOWQaokaIchg6z/Q19RUU3M9XEoVaZmdgkdOhoHOTvoFxCMWvItTSnstPMfT3aenCBHu8jIKoN3v0yzBu+ERLRnaBBRQMFIV9JjY/FtWY1xOImKT/yzV+yfsMl/5JH0vDPTqe4Rc/RJO1EF2ly2AOn4/I7o0k/+dSeUWp16pgxQ+hhBTgnJeWImpd5/PysyQLF7QWxLlSqXTUHR3VfL1igjXpMnl/cVMIqCXl6BUMCXoyWLK3DolQj+LC9hfLYWtrCUOn3HqW09dSxCwzr745IOPDc2wJDxG7HZuz6GfUaTQ9TxdnPW5z0ivx/AYrfQb7IuBIkJrDpyLm0f3TEbru24aC335uexzT5lQdSLt66UMAXIyVFadoXuq3sfepRIuk9xu1Ud2EhwvUr1e28Xpn2qjbTYIdi3MWTFdwINCIvegqktcQe9jYGmNbNTitScOHzAle4oOlXGEU5u5zthYP6oDFZrlagSrMA/0ZSXtXT1DpqYtfmei282qT7YsfUNuEp7OAU7RcdumU5d+KRp0CSC/rR8vmQlRnJpw=
  - secure: b5RCrjh1SpEyA2+1YdT8GGWqhxwbZB6cDHTQQDl68U+osMY+mcRLwtz2gmtKC6NyA41WWHL8QUKuAvXG24AEB9XG/IAFKHESCJcb9MxamwBdBr9jB3OJDMlEJAun2Jui0e8hj2yZfC300gC43FW6qfx8hha9kMhYOHm0p12SxG3bRKv0FhyteSN02qn4EBY/PWqFa8oUzxuzmOFZPf75qescPdrICSzcli6a6vx4HYAdviahGWoZcdYrrCFpXTpNKhrmbTlccj7b0U/25ndAbYS1YiiS9p3Uroi7syPD3SyWqmkvVJuux1rBoIt8vkF+Gw1FYSGTEHDNvHoFYubfH/oPzD4+fzI8COXIJt9maeRnBgSelTSgPxR7BsIlN5Th8Qj6lgGousRMbs6G1+InX0CCUAHEBYGfm2dqqMPMGmbix58hjwdngeJS2wv/mck+HgshpvLY/sErCnpLHg4m1qTd4tCrjNlrh/bunuT0ZnpdbZ2Cr69J7HywFDlDiM3XZDRlQYyYJPlaHTY3tQHNytgPeZ+R4fHZLEM8+myw6qbz8NB6FQwNjzzMe68dpB03TcOXx+tLSl4uIr8a8wkzCzJLB2Fhj0UIvdDHZC0/0N13fyIaD73S9liKtZXnz9Zvfl+fOK1vm8y4XiqBfyh5cuzcf292RR6nzJ68NJ4Fhk4=
